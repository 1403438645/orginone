// Code generated by goctl. DO NOT EDIT!

package entitys

import (
	"context"
	"database/sql"
	"fmt"
	"strings"
	"time"

	"github.com/zeromicro/go-zero/core/stores/builder"
	"github.com/zeromicro/go-zero/core/stores/cache"
	"github.com/zeromicro/go-zero/core/stores/sqlc"
	"github.com/zeromicro/go-zero/core/stores/sqlx"
	"github.com/zeromicro/go-zero/core/stringx"
)

var (
	asUnitFieldNames          = builder.RawFieldNames(&AsUnit{})
	asUnitRows                = strings.Join(asUnitFieldNames, ",")
	asUnitRowsExpectAutoSet   = strings.Join(stringx.Remove(asUnitFieldNames, "`id`", "`create_time`", "`update_time`"), ",")
	asUnitRowsWithPlaceHolder = strings.Join(stringx.Remove(asUnitFieldNames, "`id`", "`create_time`", "`update_time`"), "=?,") + "=?"

	cacheAssetAsUnitIdPrefix = "cache:asset:asUnit:id:"
)

type (
	asUnitModel interface {
		Insert(ctx context.Context, data *AsUnit) (sql.Result, error)
		FindOne(ctx context.Context, id int64) (*AsUnit, error)
		Update(ctx context.Context, data *AsUnit) error
		Delete(ctx context.Context, id int64) error
	}

	defaultAsUnitModel struct {
		sqlc.CachedConn
		table string
	}

	AsUnit struct {
		Id                                   int64          `db:"id"`                   // id
		UnitName                             string         `db:"unit_name"`            // 单位名称
		UnitNameEn                           sql.NullString `db:"unit_name_en"`         // 单位英文名称
		OrganizationForm                     sql.NullInt64  `db:"organization_form"`    // 组织形式：10、公司制企业（11.国有独资企业 12.其他有限责任公司 13.上市股份有限公司 股票代码 14。非上市股份有限公司）20.公司制企业（21.非公司制独资企业 22.其他非公司制企业） 30.企业化管理事业单位 40。其他
		UnitType                             sql.NullInt64  `db:"unit_type"`            // 单位分类1、主管部门 2、二级单位 3、基层单位 100、政府财政事务 200、安全管理事务 300、
		ParentNodeName                       sql.NullString `db:"parent_node_name"`     // 上级单位名称
		ChargeSectionId                      sql.NullInt64  `db:"charge_section_id"`    // 主管部门id
		ChargeSectionCode                    sql.NullString `db:"charge_section_code"`  // 主管部门code
		ChargeSectionName                    sql.NullString `db:"charge_section_name"`  // 主管部门名称
		LocalFinancialCode                   sql.NullString `db:"local_financial_code"` // 本级财政代码
		LocalFinancialName                   sql.NullString `db:"local_financial_name"` // 本级财政名称
		LocalFinancialId                     sql.NullString `db:"local_financial_id"`
		OfficeAdministrationCode             sql.NullString `db:"office_administration_code"`              // 本级机关事务管理局代码
		OfficeAdministrationName             sql.NullString `db:"office_administration_name"`              // 本级机关事务管理局名称
		AdministrationDivisionCode           sql.NullString `db:"administration_division_code"`            // 行政区划代码
		AdministrationDivisionName           sql.NullString `db:"administration_division_name"`            // 行政区划名称
		BudgetCode                           sql.NullInt64  `db:"budget_code"`                             // 财政预算代码：编码方法：采用层次码，用数字表示,代码结构为每3位一层。一级单位3位码,二级单位6位码,……,七级单位21位码。其中，预算单位本级由该预算单位的单位层次码加上001表示。中央一级预算单位统一的3位代码表见表5。 应用范围：中央使用,地方参照。 代码	名称 101	国务院办公厅 102	国家发展和改革委员会 105	教育部 106	科学技术部 107	国家国防科技工业局 108	国家民族事务委员会 109	国家体育总局 110	国家人口和计划生育委员会 111	公安部 112	国家安全部 113	司法部 114	外交部 115	监察部 117	人力资源和社会保障部 118	民政部 119	财政部 120	住房和城乡建设部 121	国土资源部 122	铁道部 123	交通运输部 124	工业和信息化部 125	农业部 126	水利部 127	全国社会保障基金理事会
		CollegeCode                          sql.NullString `db:"college_code"`                            // 高等院校代码院校代号即院校代码或学校代码，为全国各高校录取时为方便考生填报志愿而加注的由数字组成的代号串。院校代码就如同是学校的一个身份证号，方便查询学校信息，教育部为高校编排的代码有5位（此代码全国通用），各省教育考试院为高校编排代码有4位（此代码一般作填报高考志愿用，同一所高校在不同省份代码也不一样），由于高校办学情况每年都有变动，所以高校代码也有变化。 10001 北京大学 北京医科大学并入
		OrganizationCode                     sql.NullString `db:"organization_code"`                       // 组织机构代码组织机构代码按照强制性国家标准GB11714《全国组织机构代码编制规则》编制，由八位数字(或大写拉丁字母)本体代码和一位数字(或大写拉丁字母)校验码组成。组织机构代码证组织机构代码证书包括正本、副本和电子副本(IC卡)，代码登记部门在为组织机构赋码发证的同时，还要采集28项基础信息，并按照国家标准对这些信息进行编码，将这些信息存入代码数据库和代码证电子副本(IC卡)中，供代码应用部门使用。代码登记部门所采集的基础信息包括:机构名称、机构地址、机构类型、经济性质、行业分类、规模、法人代表等。
		UnitTypeCode                         sql.NullInt64  `db:"unit_type_code"`                          // 单位类型名称代码	名称	说明 1	行政	指依宪法和有关组织法的规定设置的，行使国家行政职权，负责对国家各项行政事务进行组织、管理、监督和指挥的国家机关。这里包括行政、立法、司法、军队、党务等按公务员法管理的单位。 2	事业	为了社会公益目的，从事教育、文化、卫生、科技等活动并以非盈利性为主的社会服务组织。 3	参公	参照公务员法管理的单位。 4、 企业 企业单位 9	其他	除上述行政、事业外的其他单位。
		UnitTypeName                         sql.NullInt64  `db:"unit_type_name"`                          // 单位类型名称代码	名称	说明 1	行政	指依宪法和有关组织法的规定设置的，行使国家行政职权，负责对国家各项行政事务进行组织、管理、监督和指挥的国家机关。这里包括行政、立法、司法、军队、党务等按公务员法管理的单位。 2	事业	为了社会公益目的，从事教育、文化、卫生、科技等活动并以非盈利性为主的社会服务组织。 3	参公	参照公务员法管理的单位。 4、 企业 企业单位 9	其他	除上述行政、事业外的其他单位。
		UnitBasicProperty                    sql.NullInt64  `db:"unit_basic_property"`                     // 单位基本性质
		SocialCreditCode                     sql.NullString `db:"social_credit_code"`                      // 统一社会信用代码
		BudgetUnitName                       sql.NullString `db:"budget_unit_name"`                        // 预算单位级次名称代码	名称 1	一级 2	二级 3	三级 4	四级 5	五级 6	六级 7	七级
		BudgetUnitCode                       sql.NullString `db:"budget_unit_code"`                        // 预算单位级次代码
		BudgetManagementLevel                sql.NullInt64  `db:"budget_management_level"`                 // 预算管理级次1、中央级 2、省级 3、地（市）级 4、县级 5、乡镇级
		FirmName                             sql.NullString `db:"firm_name"`                               // 行业名称采用国家标准GB/T 4754《国民经济行业分类》。 编码方法：采用层次码，第1位英文字母表示门类；第2、3位数字表示大类；第4位数字表示中类；第5位数字表示小类。 经营性国有资产、行政事业性国有资产、金融性国有资产和资源性国有资产的主体分类是否可以按照这个标准出。
		FirmCode                             sql.NullString `db:"firm_code"`                               // 行业代码代码	名称 A	农、林、牧、渔业 A01	农业 A011	种植业 …	…… A019	其他农业 …	…… B	采掘业 …	…… C	制造业 …	… C13	食品加工业 C131	粮食及饲料加工业 C1311	碾米业
		TelephoneNumber                      sql.NullString `db:"telephone_number"`                        // 电话号码
		PhoneNumber                          sql.NullString `db:"phone_number"`                            // 手机号码
		FaxNumber                            sql.NullString `db:"fax_number"`                              // 传真号码
		EmailAddress                         sql.NullString `db:"email_address"`                           // 电子邮件
		Province                             sql.NullString `db:"province"`                                // 省
		City                                 sql.NullString `db:"city"`                                    // 市
		County                               sql.NullString `db:"county"`                                  // 区县
		StreetAddress                        sql.NullString `db:"street_address"`                          // 街道地址
		PostalCode                           sql.NullString `db:"postal_code"`                             // 邮政编码
		FundSupplyModeName                   sql.NullInt64  `db:"fund_supply_mode_name"`                   // 经费供给方式名称：代码	名称	说明 1	全额	指由财政供应全部经费的预算单位。 2	差额	指财政按单位收支差额供应经费的预算单位。 3	自收自支	不靠财政供应经费的预算单位。 9	其他	指财政按其他方式供应经费的预算单位。
		FundSupplyModeCode                   sql.NullInt64  `db:"fund_supply_mode_code"`                   // 经费供给方式代码：代码	名称	说明 1	全额	指由财政供应全部经费的预算单位。 2	差额	指财政按单位收支差额供应经费的预算单位。 3	自收自支	不靠财政供应经费的预算单位。 9	其他	指财政按其他方式供应经费的预算单位。
		AdministrationLevelName              sql.NullInt64  `db:"administration_level_name"`               // 单位行政级别名称：代码	名称 1	正部（省）级 2	副部（省）级 3	正厅（地）级 4	副厅（地）级 5	正处（县）级 6	副处（县）级 7	正科级 8	副科级 9	股级
		AdministrationLevelType              sql.NullInt64  `db:"administration_level_type"`               // 行政单位部门性质分类代码
		DepartmentCategoryName               sql.NullInt64  `db:"department_category_name"`                // 事业单位部门性质分类名称
		BusinessDepartmentClassificationCode sql.NullInt64  `db:"business_department_classification_code"` // 事业单位部门性质分类代码：代码	名称 1	行政单位 11	共产党机关 12	政府机关 13	人大机关 14	政协机关 15	民主党派机关 16	群众团体 2	公检法司 21	公安 22	检察 23	法院 24	司法行政 25	监狱 26	劳教 29	其他 3	驻外机构 代码	名称 1	农、林、牧、渔业 2	交通运输、仓储和邮政业 3	科学研究、技术服务和地质勘查业 4	水利、环境和公共设施管理业 5	教育 6	卫生、社会保障和社会福利业 7	文化、体育和娱乐业 9	其他
		Principal                            sql.NullString `db:"principal"`                               // 负责人
		Contact                              sql.NullString `db:"contact"`                                 // 联系人
		CorporateRepresentative              sql.NullString `db:"corporate_representative"`                // 法人代表
		EconomicType                         sql.NullInt64  `db:"economic_type"`                           // 经济类型：10、国有及国有控股（是否中外合资合作企业 11.是 12，否） 20、厂办大集体（21 中央企厂办大集体 22、中央下放企业厂办大集体；23、地方企业厂办大集体） 30.其他城镇计提
		FinancialAffiliation                 sql.NullString `db:"financial_affiliation"`                   // 财务隶属关系（行政隶属关系代码-部门标识代码）
		FinancialUnit                        sql.NullInt64  `db:"financial_unit"`                          // 是否财政单位
		VerticalUnit                         sql.NullInt64  `db:"vertical_unit"`                           // 是否垂管单位
		VirtualUnit                          sql.NullInt64  `db:"virtual_unit"`                            // 是否虚拟单位
		AccountingSystem                     sql.NullInt64  `db:"accounting_system"`                       // 单位执行会计制度:10.行政单位会计制度 20.事业单位会计制度 21.科学事业单位会计制度 22.中小学校会计制度 23.高等学校会计制度 24.医院会计制度 25.基层医疗卫生机构会计制度 26.测绘事业单位会计制度 27.地质勘查单位会计制度 28.彩票机构会计制度 30.民间非营利组织会计制度 50.其他
		CorporateTag                         sql.NullString `db:"corporate_tag"`                           // 企业标志
		MaintainerMark                       sql.NullString `db:"maintainer_mark"`                         // 维修商标志
		SupplierMark                         sql.NullString `db:"supplier_mark"`                           // 供应商标志
		ManufactureMark                      sql.NullString `db:"manufacture_mark"`                        // 制造商标志
		AssetDisposalAgencyTag               sql.NullString `db:"asset_disposal_agency_tag"`               // 资产处置代理机构标志
		StateAssetManagementCompany          sql.NullString `db:"state_asset_management_company"`          // 国有资产经营公司标志
		InstitutionNumber                    sql.NullInt64  `db:"institution_number"`                      // 事业编制人数
		AuthorizedNumber                     sql.NullInt64  `db:"authorized_number"`                       // 行政编制人数
		OfSideNumber                         sql.NullInt64  `db:"of_side_number"`                          // 编制外人数
		InstitutionAuthority                 sql.NullString `db:"institution_authority"`                   // 事业编制
		AdministrationAuthority              sql.NullString `db:"administration_authority"`                // 行政编制
		EnableTime                           sql.NullTime   `db:"enable_time"`                             // 启用时间
		DisableTime                          sql.NullTime   `db:"disable_time"`                            // 停用时间
		SealTime                             sql.NullTime   `db:"seal_time"`                               // 封存时间
		UnitRemark                           sql.NullString `db:"unit_remark"`                             // 备注
		AssetDownloadStatus                  sql.NullString `db:"asset_download_status"`                   // 资产数据下载状态
		LatitudeAndLongitude                 sql.NullString `db:"latitude_and_longitude"`                  // GPS经纬度
		Sort                                 sql.NullInt64  `db:"sort"`                                    // 排序
		OrganCode                            sql.NullString `db:"organ_code"`                              // 组织（单位）编码
		UpdateUser                           sql.NullInt64  `db:"update_user"`
		CreateUser                           sql.NullInt64  `db:"create_user"`
		UpdateTime                           time.Time      `db:"update_time"`
		CreateTime                           time.Time      `db:"create_time"` // 插入时间
		IsDeleted                            int64          `db:"is_deleted"`
		Status                               int64          `db:"status"`                    // 状态 1：有效 0：无效
		HadInnerNumber                       sql.NullInt64  `db:"had_inner_number"`          // 实有内设机构数量
		ApproveInnerNumber                   sql.NullInt64  `db:"approve_inner_number"`      // 批准内设机构数量
		Img                                  sql.NullString `db:"img"`                       // 单位logo
		LinkMan                              sql.NullString `db:"link_man"`                  // 单位联系人
		LinkPhone                            sql.NullString `db:"link_phone"`                // 单位管理员联系方式
		TenantId                             sql.NullInt64  `db:"tenant_id"`                 // 租户id
		UnitCode                             sql.NullString `db:"unit_code"`                 // 单位编码
		AuthorityTotal                       sql.NullInt64  `db:"authority_total"`           // 编制合计
		StaffOnActiveDuty                    sql.NullInt64  `db:"staff_on_active_duty"`      // 在职人员
		RetiredStaff                         sql.NullInt64  `db:"retired_staff"`             // 离退休人员
		OtherStaff                           sql.NullInt64  `db:"other_staff"`               // 其它人员
		IsVirtual                            sql.NullString `db:"is_virtual"`                // 实/虚单位
		UnitReform                           sql.NullInt64  `db:"unit_reform"`               // 事业单位改革分类10.行政类事业单位21.公益一类事业单位22.公益二类事业单位23.生产经营类事业单位90.暂未明确类别单位
		PersonExpenditure                    sql.NullInt64  `db:"person_expenditure"`        // 基本支出人员经费功能分类
		InstitutionType                      sql.NullString `db:"institution_type"`          // 行业机构类型83 教育91 中国共产党机关92 国家机构94 社会保障95 群众团体、社会团体和其他成员组织96 基层群众自治组织及其他组织
		DepartmentIdentification             sql.NullInt64  `db:"department_identification"` // 部门标识
		TotalHeadcount                       sql.NullInt64  `db:"total_headcount"`
	}
)

func newAsUnitModel(conn sqlx.SqlConn, c cache.CacheConf) *defaultAsUnitModel {
	return &defaultAsUnitModel{
		CachedConn: sqlc.NewConn(conn, c),
		table:      "`as_unit`",
	}
}

func (m *defaultAsUnitModel) Insert(ctx context.Context, data *AsUnit) (sql.Result, error) {
	assetAsUnitIdKey := fmt.Sprintf("%s%v", cacheAssetAsUnitIdPrefix, data.Id)
	ret, err := m.ExecCtx(ctx, func(ctx context.Context, conn sqlx.SqlConn) (result sql.Result, err error) {
		query := fmt.Sprintf("insert into %s (%s) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", m.table, asUnitRowsExpectAutoSet)
		return conn.ExecCtx(ctx, query, data.UnitName, data.UnitNameEn, data.OrganizationForm, data.UnitType, data.ParentNodeName, data.ChargeSectionId, data.ChargeSectionCode, data.ChargeSectionName, data.LocalFinancialCode, data.LocalFinancialName, data.LocalFinancialId, data.OfficeAdministrationCode, data.OfficeAdministrationName, data.AdministrationDivisionCode, data.AdministrationDivisionName, data.BudgetCode, data.CollegeCode, data.OrganizationCode, data.UnitTypeCode, data.UnitTypeName, data.UnitBasicProperty, data.SocialCreditCode, data.BudgetUnitName, data.BudgetUnitCode, data.BudgetManagementLevel, data.FirmName, data.FirmCode, data.TelephoneNumber, data.PhoneNumber, data.FaxNumber, data.EmailAddress, data.Province, data.City, data.County, data.StreetAddress, data.PostalCode, data.FundSupplyModeName, data.FundSupplyModeCode, data.AdministrationLevelName, data.AdministrationLevelType, data.DepartmentCategoryName, data.BusinessDepartmentClassificationCode, data.Principal, data.Contact, data.CorporateRepresentative, data.EconomicType, data.FinancialAffiliation, data.FinancialUnit, data.VerticalUnit, data.VirtualUnit, data.AccountingSystem, data.CorporateTag, data.MaintainerMark, data.SupplierMark, data.ManufactureMark, data.AssetDisposalAgencyTag, data.StateAssetManagementCompany, data.InstitutionNumber, data.AuthorizedNumber, data.OfSideNumber, data.InstitutionAuthority, data.AdministrationAuthority, data.EnableTime, data.DisableTime, data.SealTime, data.UnitRemark, data.AssetDownloadStatus, data.LatitudeAndLongitude, data.Sort, data.OrganCode, data.UpdateUser, data.CreateUser, data.IsDeleted, data.Status, data.HadInnerNumber, data.ApproveInnerNumber, data.Img, data.LinkMan, data.LinkPhone, data.TenantId, data.UnitCode, data.AuthorityTotal, data.StaffOnActiveDuty, data.RetiredStaff, data.OtherStaff, data.IsVirtual, data.UnitReform, data.PersonExpenditure, data.InstitutionType, data.DepartmentIdentification, data.TotalHeadcount)
	}, assetAsUnitIdKey)
	return ret, err
}

func (m *defaultAsUnitModel) FindOne(ctx context.Context, id int64) (*AsUnit, error) {
	assetAsUnitIdKey := fmt.Sprintf("%s%v", cacheAssetAsUnitIdPrefix, id)
	var resp AsUnit
	err := m.QueryRowCtx(ctx, &resp, assetAsUnitIdKey, func(ctx context.Context, conn sqlx.SqlConn, v interface{}) error {
		query := fmt.Sprintf("select %s from %s where `id` = ? limit 1", asUnitRows, m.table)
		return conn.QueryRowCtx(ctx, v, query, id)
	})
	switch err {
	case nil:
		return &resp, nil
	case sqlc.ErrNotFound:
		return nil, ErrNotFound
	default:
		return nil, err
	}
}

func (m *defaultAsUnitModel) Update(ctx context.Context, data *AsUnit) error {
	assetAsUnitIdKey := fmt.Sprintf("%s%v", cacheAssetAsUnitIdPrefix, data.Id)
	_, err := m.ExecCtx(ctx, func(ctx context.Context, conn sqlx.SqlConn) (result sql.Result, err error) {
		query := fmt.Sprintf("update %s set %s where `id` = ?", m.table, asUnitRowsWithPlaceHolder)
		return conn.ExecCtx(ctx, query, data.UnitName, data.UnitNameEn, data.OrganizationForm, data.UnitType, data.ParentNodeName, data.ChargeSectionId, data.ChargeSectionCode, data.ChargeSectionName, data.LocalFinancialCode, data.LocalFinancialName, data.LocalFinancialId, data.OfficeAdministrationCode, data.OfficeAdministrationName, data.AdministrationDivisionCode, data.AdministrationDivisionName, data.BudgetCode, data.CollegeCode, data.OrganizationCode, data.UnitTypeCode, data.UnitTypeName, data.UnitBasicProperty, data.SocialCreditCode, data.BudgetUnitName, data.BudgetUnitCode, data.BudgetManagementLevel, data.FirmName, data.FirmCode, data.TelephoneNumber, data.PhoneNumber, data.FaxNumber, data.EmailAddress, data.Province, data.City, data.County, data.StreetAddress, data.PostalCode, data.FundSupplyModeName, data.FundSupplyModeCode, data.AdministrationLevelName, data.AdministrationLevelType, data.DepartmentCategoryName, data.BusinessDepartmentClassificationCode, data.Principal, data.Contact, data.CorporateRepresentative, data.EconomicType, data.FinancialAffiliation, data.FinancialUnit, data.VerticalUnit, data.VirtualUnit, data.AccountingSystem, data.CorporateTag, data.MaintainerMark, data.SupplierMark, data.ManufactureMark, data.AssetDisposalAgencyTag, data.StateAssetManagementCompany, data.InstitutionNumber, data.AuthorizedNumber, data.OfSideNumber, data.InstitutionAuthority, data.AdministrationAuthority, data.EnableTime, data.DisableTime, data.SealTime, data.UnitRemark, data.AssetDownloadStatus, data.LatitudeAndLongitude, data.Sort, data.OrganCode, data.UpdateUser, data.CreateUser, data.IsDeleted, data.Status, data.HadInnerNumber, data.ApproveInnerNumber, data.Img, data.LinkMan, data.LinkPhone, data.TenantId, data.UnitCode, data.AuthorityTotal, data.StaffOnActiveDuty, data.RetiredStaff, data.OtherStaff, data.IsVirtual, data.UnitReform, data.PersonExpenditure, data.InstitutionType, data.DepartmentIdentification, data.TotalHeadcount, data.Id)
	}, assetAsUnitIdKey)
	return err
}

func (m *defaultAsUnitModel) Delete(ctx context.Context, id int64) error {
	assetAsUnitIdKey := fmt.Sprintf("%s%v", cacheAssetAsUnitIdPrefix, id)
	_, err := m.ExecCtx(ctx, func(ctx context.Context, conn sqlx.SqlConn) (result sql.Result, err error) {
		query := fmt.Sprintf("delete from %s where `id` = ?", m.table)
		return conn.ExecCtx(ctx, query, id)
	}, assetAsUnitIdKey)
	return err
}

func (m *defaultAsUnitModel) formatPrimary(primary interface{}) string {
	return fmt.Sprintf("%s%v", cacheAssetAsUnitIdPrefix, primary)
}

func (m *defaultAsUnitModel) queryPrimary(ctx context.Context, conn sqlx.SqlConn, v, primary interface{}) error {
	query := fmt.Sprintf("select %s from %s where `id` = ? limit 1", asUnitRows, m.table)
	return conn.QueryRowCtx(ctx, v, query, primary)
}

func (m *defaultAsUnitModel) tableName() string {
	return m.table
}
